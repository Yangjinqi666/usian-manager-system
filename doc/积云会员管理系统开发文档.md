# 会员管理系统

## 一、项目介绍与演示

### 1.1 项目演示地址

http://vue.mengxuegu.com/

### 1.2 项目介绍

本项目是一个会员管理系统,本项目中一共涉及到用户、首页、会员管理、供应商管理、商品管理、员工管理等模块. 涉及到的功能有: 登录、退出登录、修改密码、菜单动态渲染、面包屑导航、增删改查分页等.

### 1.3 学习本项目之后你可以收获哪些

1. 掌握Git版本控制工具在实际开发中的使用
2. 掌握使用vue脚手架创建项目以及vue脚手架的基础配置
3. 掌握项目中常规后台管理系统的业务开发
4. 掌握element-ui的组件二次封装
5. 掌握项目的打包上线流程
6. ......

### 1.4 本项目使用到的技术栈

- `vue2.x`
- `element-ui`
- `axios`
- `git`
- `vuex`
- `day.js`
- `webpack`
- `javascript`
- `es6`
- `scss`
- `vue-router`
- `mockjs&FastMock`
- ......

## 二、使用vue脚手架创建项目

### 2.1 安装项目所需要的环境

- 安装`nodeJS`
- 安装`vue-cli`
- 安装`git`
- 安装`postman`
- ......

### 2.2 使用vue-cli创建项目

1. 创建项目命令

```
vue create 项目名称
```

2. 更新`vuec-li`

```
npm update -g @vue/cli
```

## 三、使用Git对项目进行版本控制

1. 创建远程仓库
2. 将本地仓库和远程仓库建立连接
3. 将本地仓库的内容推送到远程仓库
4. 创建development
5. 将开发文档添加到doc文件夹
6. 添加到暂存区
7. 安装`cz-customizable`
8. 在package.json进行配置
9. 创建`.cz-config.js`,在这个配置自定义message提交信息规范
10. 使用git cz来进行提交
11. 将本地仓库的代码推送远程仓库



**总结:**

- 将工作区的代码添加到暂存区
- 将暂存区的代码提交到本地仓库
- 将本地仓库的代码推送到远程仓库

## 四、 对项目进行基础配置

1. 配置项目的浏览器标题
2. 配置ico图标
3. 配置server服务器
   - 端口号
   - 主机名
   - 自定打开浏览器
   - 是否开启https
   - 更多的配置请参考webpack
4. 安装项目所需要的依赖
   - 安装elment-ui
   - 安装axios

## 五、 对项目进行跨域配置

### 5.1 为什么要对项目进行跨域配置?

因为浏览器端在进行http请求的时候,会受到同源策略的影响, 导致域名、协议、端口等只要用一项不同就会产生跨域问题, 所以我们想要能够成功请求到服务端数据就需要进行跨域处理

### 5.2 常见的解决跨域的方式有哪些?

- http proxy (代理的方式)  vue中一般使用代理的方式
- jsonp
- iframe
- nginx
- cros 后端允许跨域
- .....

### 5.3 vue中如何解决跨域

- 演示跨域错误

  ![image-20220919160507449](../../积云会员管理系统开发文档.assets/image-20220919160507449.png)

- 解决跨域`vue.config.js`

  ```javascript
  const { defineConfig } = require("@vue/cli-service");
  module.exports = defineConfig({
    transpileDependencies: true,
    // 项目打包之后白屏问题
    publicPath : "./",
    devServer: {
      // 端口号
      port: 8888,
      // 主机名
      host: "localhost",
      // 启动项目时是否自动打开浏览器
      open: true,
      // 是否开启https
      https: false,
      // 配置跨域
      proxy : {
        // /dev-api 代理名称 process.env.VUE_APP_BASE_API === "/dev-api"
       [process.env.VUE_APP_BASE_API] : {
          target : process.env.VUE_APP_SERVICE_URL,
          changeOrigin : true,
          pathRewrite : {
            ["^" + process.env.VUE_APP_BASE_API] : ''
          }
        }
        // "/dev1-api" : {
        //   // 跨域的地址
        //   target : "http://localhost:3000",
        //   // 开启跨域
        //   changeOrigin : true,
        //   // 路径重写
        //   pathRewrite : {
        //     "^/dev1-api" : ''
        //   }
        // }
      }
    },
    // 关闭eslint
    lintOnSave : false
  });
  
  ```

  `.env.development`

  ```javascript
  # 在开发环境内, 我们可以使用process.env.VUE_APP_BASE_API 可以读取.env.development文件内的变量
  
  # 代理名称
  VUE_APP_BASE_API = "/dev-api"
  
  # 跨域的地址
  VUE_APP_SERVICE_URL = "http://localhost:3000"
  ```

  `env.production`

  ```javascript
  # 生产环境
  VUE_APP_BASE_API = "/prod-api"
  ```

  

### 5.4 vue中如何去配置多个跨域代理

**存在的问题,一个项目中,如何存在多个公共请求接口地址, 这个时候我们如何去配置多个跨域代理?**

解决方案: 

```javascript
const { defineConfig } = require("@vue/cli-service");
module.exports = defineConfig({
  transpileDependencies: true,
  // 项目打包之后白屏问题
  publicPath : "./",
  devServer: {
    // 端口号
    port: 8888,
    // 主机名
    host: "localhost",
    // 启动项目时是否自动打开浏览器
    open: true,
    // 是否开启https
    https: false,
    // 配置跨域
    proxy : {
      [process.env.VUE_APP_BASE_API]: {
        target: process.env.VUE_APP_SERVICE_URL,
        changeOrigin: true,
        pathRewrite: {
          ["^" + process.env.VUE_APP_BASE_API] : ""
        }
      },
      [process.env.VUE_APP_BASE_API1]: {
        target : process.env.VUE_APP_SERVICE_URL1,
        changeOrigin : true,
        pathRewrite : {
          ["^" + process.env.VUE_APP_BASE_API1] : ""
        }
      }
      // /dev-api 代理名称 process.env.VUE_APP_BASE_API === "/dev-api"
     // [process.env.VUE_APP_BASE_API] : {
     //    target : process.env.VUE_APP_SERVICE_URL,
     //    changeOrigin : true,
     //    pathRewrite : {
     //      ["^" + process.env.VUE_APP_BASE_API] : ''
     //    }
     //  }
      // "/dev1-api" : {
      //   // 跨域的地址
      //   target : "http://localhost:3000",
      //   // 开启跨域
      //   changeOrigin : true,
      //   // 路径重写
      //   pathRewrite : {
      //     "^/dev1-api" : ''
      //   }
      // }
    }
  },
  // 关闭eslint
  lintOnSave : false
});

```

`.env.development`

```javascript
# 在开发环境内, 我们可以使用process.env.VUE_APP_BASE_API 可以读取.env.development文件内的变量

# 代理名称
VUE_APP_BASE_API = "/dev-api"
VUE_APP_BASE_API1 = "/dev1-api"

# 跨域的地址
VUE_APP_SERVICE_URL = "http://localhost:3000"
VUE_APP_SERVICE_URL1 = "http://localhost:4000"

```

`env.production`

```javascript
# 生产环境
VUE_APP_BASE_API = "/prod-api"
```

## 六、二次封装axios

### 6.1 为什么要对axios进行二次封装?

1. 会有大量重复的代码
2. 不利于后期的维护
3. 不利于后期功能扩展
4. .......

### 6.2 如何对axios进行二次封装

1. 在src目录下创建utils文件夹
2. 在utils文件夹内创建request.js
3. 在request.js文件内
   1. 引入axios
   2. 创建axios实例配置
   3. 创建请求拦截器
   4. 创建响应拦截器
   5. 导出axios实例对象

### 6.3 都需要封装哪些内容?

- 请求拦截
- 响应拦截
- 传参不统一问题
- 当存在多个跨域代理时请求对应代理的问题
- loading加载
- 请求头token发送
- 全局响应处理
- 接口重复请求问题
- ......

## 七、封装API接口

### 7.1 为什么要封装API接口?

因为不封装的话会我们在不同的页面调用大量的接口时, 会造成后期接口在进行修改或者维护时会变得非常麻烦,不容易找到要修改的接口

而封装之后,我们的接口就会统一起来,方便后期的修改与维护, 同时也提高了代码的可读性 

### 7.2 如何封装Api接口

- 把所有的api接口都封装一个js文件中
- 按对应的模块去封装对应的api接口 (我们采用的模块的封装)

### 7.3 封装的具体步骤

1. 创建对应模块的js文件
2. 引入request.js
3. 创建对应的接口方法
4. 导出api接口方法

**代码示例:**

```javascript
/**
 * @author YangLing
 * @date 2022/9/20 09:37
 */

// 会员管理接口    http://vue.mengxuegu.com/pro-api/member/list/search/1/20
// 供应商管理接口  http://vue.mengxuegu.com/pro-api/supplier/list/search/1/10

// 引入request
import request from "../utils/request"

/**
 * 获取会员列表接口
 * @param page
 * @param size
 * @param data
 */
const getMemberList = (page = 1 ,size= 10,data={}) => {
  return request({
    url : `/member/list/search/${page}/${size}`,
    method : 'POST',
    data
  })
}

/**
 * 获取供应商列表接口
 * @param page
 * @param size
 * @param data
 */
const getSupplierList = (page = 1,size = 10,data={}) => {
  return request({
    url : `/supplier/list/search/${page}/${size}`,
    method : 'POST',
    data
  })
}

export default {
  getMemberList,
  getSupplierList
}

```



## 八、 实现登录模块

## 九、实现主页模块

## 十、实现左侧菜单栏渲染

## 十一、实现退出登录模块

## 十二、实现页面鉴权

## 十三、实现首页模块

## 十四、实现会员管理模块

## 十五、 实现供应商管理模块

## 十六、 实现商品管理模块

## 十七、实现员工管理模块

## 十八、实现项目打包上线与部署





